// jQuery.editable.js v1.1.3
// http://shokai.github.io/jQuery.editable
// (c) 2012-2015 Sho Hashimoto <hashimoto@shokai.org>
//
// Modified by Benjamin Van Ryseghem
// The MIT License
!function(e){var t=function(e){return e.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")};e.fn.editable=function(r,a){var i=a.callback,n=a.onInputCreation||function(){};if("function"!=typeof i&&(i=function(){}),"string"==typeof r)var c=this,o=r,l="input";else{if("object"!=typeof r)throw'Argument Error - jQuery.editable("click", function(){ ~~ })';var c=r.trigger||this;"string"==typeof c&&(c=e(c));var o=r.action||"click",l=r.type||"input"}var s=this,u={};return u.start=function(r){c.unbind("clickhold"===o?"mousedown":o),c!==s&&c.hide();var a=s.attr("editable-src")?s.attr("editable-src"):s.text();s.addClass("pending-edit");var d=("textarea"===l?a.replace(/<br( \/)?>/gm,"\n").replace(/&gt;/gm,">").replace(/&lt;/gm,"<"):a).replace(/^\s+/,"").replace(/\s+$/,""),f=e("textarea"===l?"<textarea>":"<input>");f.val(d).css("width","textarea"===l?"100%":s.width()+s.height()).css("font-size","100%").css("margin",0).attr("id","editable_"+1*new Date).addClass("editable"),"textarea"===l&&f.css("height",s.height());try{n(f,r)}catch(g){}var p=function(){var e=f.val().replace(/^\s+/,"").replace(/\s+$/,""),r=t(e);"textarea"===l&&(r=r.replace(/[\r\n]/gm,"<br />")),s.html(r),i({value:e,target:s,old_value:d}),s.removeClass("pending-edit"),u.register(),c!==s&&c.show()};f.blur(p),"input"===l&&f.keydown(function(e){13===e.keyCode&&p()}),"textarea"===l&&f.keydown(function(e){e.ctrlKey&&13==e.keyCode&&p()}),s.html(f),f.focus()},u.register=function(){if("clickhold"===o){var e=null;c.bind("mousedown",function(t){e=setTimeout(function(){u.start(t)},500)}),c.bind("mouseup mouseout",function(){clearTimeout(e)})}else c.bind(o,u.start)},u.register(),this}}(jQuery);